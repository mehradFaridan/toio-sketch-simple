"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var BaseCharacteristic = (function () {
    function BaseCharacteristic(characteristic, eventEmitter) {
        var _this = this;
        this.characteristic = characteristic;
        if (this.characteristic.properties.includes('notify')) {
            this.characteristic.on('data', this.onData.bind(this));
        }
        this.eventEmitter = eventEmitter;
        if (this.shouldSubscribe()) {
            this.characteristic.subscribe();
        }
        eventEmitter.on('newListener', function (event) {
            if (Object.keys(Event).includes(event)) {
                _this.characteristic.subscribe();
            }
        });
        eventEmitter.on('removeListener', function (event) {
            var eventKeys = Object.keys(Event);
            if (eventKeys.includes(event) && !_this.shouldSubscribe()) {
                _this.characteristic.unsubscribe();
            }
        });
    }
    BaseCharacteristic.prototype.shouldSubscribe = function () {
        var eventKeys = Object.keys(Event);
        return this.eventEmitter.eventNames().some(function (eventName) {
            return eventKeys.includes(eventName);
        });
    };
    return BaseCharacteristic;
}());
exports.BaseCharacteristic = BaseCharacteristic;
//# sourceMappingURL=base-characteristic.js.map